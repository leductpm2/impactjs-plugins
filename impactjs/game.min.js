/*! Built with IMPACT - impactjs.com */

(function(window){"use strict";window.ig={game:null,version:'1.24',global:window,modules:{},resources:[],ready:false,baked:false,nocache:'',ua:{},prefix:(window.ImpactPrefix||''),lib:'lib/',_current:null,_loadQueue:[],_waitForOnload:0,$:function(selector){return selector.charAt(0)=='#'?document.getElementById(selector.substr(1)):document.getElementsByTagName(selector);},$new:function(name){return document.createElement(name);},copy:function(object){if(!object||typeof(object)!='object'||object instanceof HTMLElement||object instanceof ig.Class){return object;}
else if(object instanceof Array){var c=[];for(var i=0,l=object.length;i<l;i++){c[i]=ig.copy(object[i]);}
return c;}
else{var c={};for(var i in object){c[i]=ig.copy(object[i]);}
return c;}},merge:function(original,extended){for(var key in extended){var ext=extended[key];if(typeof(ext)!='object'||ext instanceof HTMLElement||ext instanceof ig.Class||ext===null){original[key]=ext;}
else{if(!original[key]||typeof(original[key])!='object'){original[key]=(ext instanceof Array)?[]:{};}
ig.merge(original[key],ext);}}
return original;},ksort:function(obj){if(!obj||typeof(obj)!='object'){return[];}
var keys=[],values=[];for(var i in obj){keys.push(i);}
keys.sort();for(var i=0;i<keys.length;i++){values.push(obj[keys[i]]);}
return values;},setVendorAttribute:function(el,attr,val){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);el[attr]=el['ms'+uc]=el['moz'+uc]=el['webkit'+uc]=el['o'+uc]=val;},getVendorAttribute:function(el,attr){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);return el[attr]||el['ms'+uc]||el['moz'+uc]||el['webkit'+uc]||el['o'+uc];},normalizeVendorAttribute:function(el,attr){var prefixedVal=ig.getVendorAttribute(el,attr);if(!el[attr]&&prefixedVal){el[attr]=prefixedVal;}},getImagePixels:function(image,x,y,width,height){var canvas=ig.$new('canvas');canvas.width=image.width;canvas.height=image.height;var ctx=canvas.getContext('2d');ig.System.SCALE.CRISP(canvas,ctx);var ratio=ig.getVendorAttribute(ctx,'backingStorePixelRatio')||1;ig.normalizeVendorAttribute(ctx,'getImageDataHD');var realWidth=image.width/ratio,realHeight=image.height/ratio;canvas.width=Math.ceil(realWidth);canvas.height=Math.ceil(realHeight);ctx.drawImage(image,0,0,realWidth,realHeight);return(ratio===1)?ctx.getImageData(x,y,width,height):ctx.getImageDataHD(x,y,width,height);},module:function(name){if(ig._current){throw("Module '"+ig._current.name+"' defines nothing");}
if(ig.modules[name]&&ig.modules[name].body){throw("Module '"+name+"' is already defined");}
ig._current={name:name,requires:[],loaded:false,body:null};ig.modules[name]=ig._current;ig._loadQueue.push(ig._current);return ig;},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig;},defines:function(body){ig._current.body=body;ig._current=null;ig._initDOMReady();},addResource:function(resource){ig.resources.push(resource);},setNocache:function(set){ig.nocache=set?'?'+Date.now():'';},_loadScript:function(name,requiredFrom){ig.modules[name]={name:name,requires:[],loaded:false,body:null};ig._waitForOnload++;var path=ig.prefix+ig.lib+name.replace(/\./g,'/')+'.js'+ig.nocache;var script=ig.$new('script');script.type='text/javascript';script.src=path;script.onload=function(){ig._waitForOnload--;ig._execModules();};script.onerror=function(){throw('Failed to load module '+name+' at '+path+' '+'required from '+requiredFrom);};ig.$('head')[0].appendChild(script);},_execModules:function(){var modulesLoaded=false;for(var i=0;i<ig._loadQueue.length;i++){var m=ig._loadQueue[i];var dependenciesLoaded=true;for(var j=0;j<m.requires.length;j++){var name=m.requires[j];if(!ig.modules[name]){dependenciesLoaded=false;ig._loadScript(name,m.name);}
else if(!ig.modules[name].loaded){dependenciesLoaded=false;}}
if(dependenciesLoaded&&m.body){ig._loadQueue.splice(i,1);m.loaded=true;m.body();modulesLoaded=true;i--;}}
if(modulesLoaded){ig._execModules();}
else if(!ig.baked&&ig._waitForOnload==0&&ig._loadQueue.length!=0){var unresolved=[];for(var i=0;i<ig._loadQueue.length;i++){var unloaded=[];var requires=ig._loadQueue[i].requires;for(var j=0;j<requires.length;j++){var m=ig.modules[requires[j]];if(!m||!m.loaded){unloaded.push(requires[j]);}}
unresolved.push(ig._loadQueue[i].name+' (requires: '+unloaded.join(', ')+')');}
throw("Unresolved (or circular?) dependencies. "+"Most likely there's a name/path mismatch for one of the listed modules "+"or a previous syntax error prevents a module from loading:\n"+
unresolved.join('\n'));}},_DOMReady:function(){if(!ig.modules['dom.ready'].loaded){if(!document.body){return setTimeout(ig._DOMReady,13);}
ig.modules['dom.ready'].loaded=true;ig._waitForOnload--;ig._execModules();}
return 0;},_boot:function(){if(document.location.href.match(/\?nocache/)){ig.setNocache(true);}
ig.ua.pixelRatio=window.devicePixelRatio||1;ig.ua.viewport={width:window.innerWidth,height:window.innerHeight};ig.ua.screen={width:window.screen.availWidth*ig.ua.pixelRatio,height:window.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone|iPod/i.test(navigator.userAgent);ig.ua.iPhone4=(ig.ua.iPhone&&ig.ua.pixelRatio==2);ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent);ig.ua.touchDevice=(('ontouchstart'in window)||(window.navigator.msMaxTouchPoints));},_initDOMReady:function(){if(ig.modules['dom.ready']){ig._execModules();return;}
ig._boot();ig.modules['dom.ready']={requires:[],loaded:false,body:null};ig._waitForOnload++;if(document.readyState==='complete'){ig._DOMReady();}
else{document.addEventListener('DOMContentLoaded',ig._DOMReady,false);window.addEventListener('load',ig._DOMReady,false);}}};ig.normalizeVendorAttribute(window,'requestAnimationFrame');if(window.requestAnimationFrame){var next=1,anims={};window.ig.setAnimation=function(callback){var current=next++;anims[current]=true;var animate=function(){if(!anims[current]){return;}
window.requestAnimationFrame(animate);callback();};window.requestAnimationFrame(animate);return current;};window.ig.clearAnimation=function(id){delete anims[id];};}
else{window.ig.setAnimation=function(callback){return window.setInterval(callback,1000/60);};window.ig.clearAnimation=function(id){window.clearInterval(id);};}
var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\bparent\b/:/.*/;var lastClassId=0;window.ig.Class=function(){};var inject=function(prop){var proto=this.prototype;var parent={};for(var name in prop){if(typeof(prop[name])=="function"&&typeof(proto[name])=="function"&&fnTest.test(prop[name])){parent[name]=proto[name];proto[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{proto[name]=prop[name];}}};window.ig.Class.extend=function(prop){var parent=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){if(typeof(prop[name])=="function"&&typeof(parent[name])=="function"&&fnTest.test(prop[name])){prototype[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{prototype[name]=prop[name];}}
function Class(){if(!initializing){if(this.staticInstantiate){var obj=this.staticInstantiate.apply(this,arguments);if(obj){return obj;}}
for(var p in this){if(typeof(this[p])=='object'){this[p]=ig.copy(this[p]);}}
if(this.init){this.init.apply(this,arguments);}}
return this;}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=window.ig.Class.extend;Class.inject=inject;Class.classId=prototype.classId=++lastClassId;return Class;};if(window.ImpactMixin){ig.merge(ig,window.ImpactMixin);}})(window);

// lib/impact/settings.js
ig.baked=true;ig.module('impact.settings').defines(function(){ig.settings={CLEAR_COLOR:'#000000',CELL_SIZE:64,GAME_RESOLUTION:{WIDTH:960,HEIGHT:720},GAME_FPS:60,GAME_SCALE_FACTOR:1,get:function(){var currentObject=this;var settingString="";for(var i=0;i<arguments.length;i++){var arg=arguments[i];currentObject=currentObject[arg];settingString+="."+arg;if(typeof currentObject==="undefined"){throw("Can't get config: "+settingString);}}
return currentObject;},};});

// lib/impact/utils/image.js
ig.baked=true;ig.module('impact.utils.image').defines(function(){"use strict";ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:false,failed:false,loadCallback:null,path:'',staticInstantiate:function(path){return ig.Image.cache[path]||null;},init:function(path){this.path=path;this.load();},load:function(loadCallback){if(this.loaded){if(loadCallback){loadCallback(this.path,true);}
return;}
else if(!this.loaded&&ig.ready){this.loadCallback=loadCallback||null;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.onerror=this.onerror.bind(this);this.data.src=ig.prefix+this.path+ig.nocache;}
else{ig.addResource(this);}
ig.Image.cache[this.path]=this;},reload:function(){this.loaded=false;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.src=this.path+'?'+Date.now();},onload:function(event){this.width=this.data.width;this.height=this.data.height;this.loaded=true;if(ig.system.scale!=1){this.resize(ig.system.scale);}
if(this.loadCallback){this.loadCallback(this.path,true);}},onerror:function(event){this.failed=true;if(this.loadCallback){this.loadCallback(this.path,false);}},resize:function(scale){var origPixels=ig.getImagePixels(this.data,0,0,this.width,this.height);var widthScaled=this.width*scale;var heightScaled=this.height*scale;var scaled=ig.$new('canvas');scaled.width=widthScaled;scaled.height=heightScaled;var scaledCtx=scaled.getContext('2d');var scaledPixels=scaledCtx.getImageData(0,0,widthScaled,heightScaled);for(var y=0;y<heightScaled;y++){for(var x=0;x<widthScaled;x++){var index=(Math.floor(y/scale)*this.width+Math.floor(x/scale))*4;var indexScaled=(y*widthScaled+x)*4;scaledPixels.data[indexScaled]=origPixels.data[index];scaledPixels.data[indexScaled+1]=origPixels.data[index+1];scaledPixels.data[indexScaled+2]=origPixels.data[index+2];scaledPixels.data[indexScaled+3]=origPixels.data[index+3];}}
scaledCtx.putImageData(scaledPixels,0,0);this.data=scaled;},draw:function(targetX,targetY,sourceX,sourceY,width,height){if(!this.loaded){return;}
var scale=ig.system.scale;sourceX=sourceX?sourceX*scale:0;sourceY=sourceY?sourceY*scale:0;width=(width?width:this.width)*scale;height=(height?height:this.height)*scale;ig.system.context.drawImage(this.data,sourceX,sourceY,width,height,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),width,height);ig.Image.drawCount++;},drawTile:function(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY){tileHeight=tileHeight?tileHeight:tileWidth;if(!this.loaded||tileWidth>this.width||tileHeight>this.height){return;}
var scale=ig.system.scale;var tileWidthScaled=Math.floor(tileWidth*scale);var tileHeightScaled=Math.floor(tileHeight*scale);var scaleX=flipX?-1:1;var scaleY=flipY?-1:1;if(flipX||flipY){ig.system.context.save();ig.system.context.scale(scaleX,scaleY);}
ig.system.context.drawImage(this.data,(Math.floor(tile*tileWidth)%this.width)*scale,(Math.floor(tile*tileWidth/this.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(targetX)*scaleX-(flipX?tileWidthScaled:0),ig.system.getDrawPos(targetY)*scaleY-(flipY?tileHeightScaled:0),tileWidthScaled,tileHeightScaled);if(flipX||flipY){ig.system.context.restore();}
ig.Image.drawCount++;}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var path in ig.Image.cache){ig.Image.cache[path].reload();}};});

// lib/impact/utils/font.js
ig.baked=true;ig.module('impact.utils.font').requires('impact.utils.image').defines(function(){"use strict";ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(ev){this._loadMetrics(this.data);this.parent(ev);this.height-=2;},widthForString:function(text){if(text.indexOf('\n')!==-1){var lines=text.split('\n');var width=0;for(var i=0;i<lines.length;i++){width=Math.max(width,this._widthForLine(lines[i]));}
return width;}
else{return this._widthForLine(text);}},_widthForLine:function(text){var width=0;for(var i=0;i<text.length;i++){width+=this.widthMap[text.charCodeAt(i)-this.firstChar];}
if(text.length>0){width+=this.letterSpacing*(text.length-1);}
return width;},heightForString:function(text){return text.split('\n').length*(this.height+this.lineSpacing);},draw:function(text,x,y,align){if(typeof(text)!='string'){text=text.toString();}
if(text.indexOf('\n')!==-1){var lines=text.split('\n');var lineHeight=this.height+this.lineSpacing;for(var i=0;i<lines.length;i++){this.draw(lines[i],x,y+i*lineHeight,align);}
return;}
if(align==ig.Font.ALIGN.RIGHT||align==ig.Font.ALIGN.CENTER){var width=this._widthForLine(text);x-=align==ig.Font.ALIGN.CENTER?width/2:width;}
if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
for(var i=0;i<text.length;i++){var c=text.charCodeAt(i);x+=this._drawChar(c-this.firstChar,x,y);}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}
ig.Image.drawCount+=text.length;},_drawChar:function(c,targetX,targetY){if(!this.loaded||c<0||c>=this.indices.length){return 0;}
var scale=ig.system.scale;var charX=this.indices[c]*scale;var charY=0;var charWidth=this.widthMap[c]*scale;var charHeight=this.height*scale;ig.system.context.drawImage(this.data,charX,charY,charWidth,charHeight,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),charWidth,charHeight);return this.widthMap[c]+this.letterSpacing;},_loadMetrics:function(image){this.widthMap=[];this.indices=[];var px=ig.getImagePixels(image,0,image.height-1,image.width,1);var currentWidth=0;for(var x=0;x<image.width;x++){var index=x*4+3;if(px.data[index]>127){currentWidth++;}
else if(px.data[index]<128&&currentWidth){this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);currentWidth=0;}}
this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2};});

// lib/impact/utils/sound.js
ig.baked=true;ig.module('impact.utils.sound').defines(function(){"use strict";ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio){ig.Sound.enabled=false;return;}
var probe=new Audio();for(var i=0;i<ig.Sound.use.length;i++){var format=ig.Sound.use[i];if(probe.canPlayType(format.mime)){this.format=format;break;}}
if(!this.format){ig.Sound.enabled=false;}
if(ig.Sound.enabled&&ig.Sound.useWebAudio){this.audioContext=new AudioContext();this.boundWebAudioUnlock=this.unlockWebAudio.bind(this);ig.system.canvas.addEventListener('touchstart',this.boundWebAudioUnlock,false);}},unlockWebAudio:function(){ig.system.canvas.removeEventListener('touchstart',this.boundWebAudioUnlock,false);var buffer=this.audioContext.createBuffer(1,1,22050);var source=this.audioContext.createBufferSource();source.buffer=buffer;source.connect(this.audioContext.destination);source.start(0);},load:function(path,multiChannel,loadCallback){if(multiChannel&&ig.Sound.useWebAudio){return this.loadWebAudio(path,multiChannel,loadCallback);}
else{return this.loadHTML5Audio(path,multiChannel,loadCallback);}},loadWebAudio:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){return this.clips[path];}
var audioSource=new ig.Sound.WebAudioSource();this.clips[path]=audioSource;var request=new XMLHttpRequest();request.open('GET',realPath,true);request.responseType='arraybuffer';var that=this;request.onload=function(ev){that.audioContext.decodeAudioData(request.response,function(buffer){audioSource.buffer=buffer;if(loadCallback){loadCallback(path,true,ev);}},function(ev){if(loadCallback){loadCallback(path,false,ev);}});};request.onerror=function(ev){if(loadCallback){loadCallback(path,false,ev);}};request.send();return audioSource;},loadHTML5Audio:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){if(this.clips[path]instanceof ig.Sound.WebAudioSource){return this.clips[path];}
if(multiChannel&&this.clips[path].length<ig.Sound.channels){for(var i=this.clips[path].length;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return this.clips[path][0];}
var clip=new Audio(realPath);if(loadCallback){if(ig.ua.mobile){setTimeout(function(){loadCallback(path,true,null);},0);}
else{clip.addEventListener('canplaythrough',function cb(ev){clip.removeEventListener('canplaythrough',cb,false);loadCallback(path,true,ev);},false);clip.addEventListener('error',function(ev){loadCallback(path,false,ev);},false);}}
clip.preload='auto';clip.load();this.clips[path]=[clip];if(multiChannel){for(var i=1;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return clip;},get:function(path){var channels=this.clips[path];if(channels&&channels instanceof ig.Sound.WebAudioSource){return channels;}
for(var i=0,clip;clip=channels[i++];){if(clip.paused||clip.ended){if(clip.ended){clip.currentTime=0;}
return clip;}}
channels[0].pause();channels[0].currentTime=0;return channels[0];}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:false,_volume:1,_loop:false,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});},add:function(music,name){if(!ig.Sound.enabled){return;}
var path=music instanceof ig.Sound?music.path:music;var track=ig.soundManager.load(path,false);if(track instanceof ig.Sound.WebAudioSource){ig.system.stopRunLoop();throw("Sound '"+path+"' loaded as Multichannel but used for Music. "+"Set the multiChannel param to false when loading, e.g.: new ig.Sound(path, false)");}
track.loop=this._loop;track.volume=this._volume;track.addEventListener('ended',this._endedCallbackBound,false);this.tracks.push(track);if(name){this.namedTracks[name]=track;}
if(!this.currentTrack){this.currentTrack=track;}},next:function(){if(!this.tracks.length){return;}
this.stop();this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length;this.currentTrack=this.tracks[this.currentIndex];this.play();},pause:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();},stop:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();this.currentTrack.currentTime=0;},play:function(name){if(name&&this.namedTracks[name]){var newTrack=this.namedTracks[name];if(newTrack!=this.currentTrack){this.stop();this.currentTrack=newTrack;}}
else if(!this.currentTrack){return;}
this.currentTrack.play();},getLooping:function(){return this._loop;},setLooping:function(l){this._loop=l;for(var i in this.tracks){this.tracks[i].loop=l;}},getVolume:function(){return this._volume;},setVolume:function(v){this._volume=v.limit(0,1);for(var i in this.tracks){this.tracks[i].volume=this._volume;}},fadeOut:function(time){if(!this.currentTrack){return;}
clearInterval(this._fadeInterval);this._fadeTimer=new ig.Timer(time);this._fadeInterval=setInterval(this._fadeStep.bind(this),50);},_fadeStep:function(){var v=this._fadeTimer.delta().map(-this._fadeTimer.target,0,1,0).limit(0,1)*this._volume;if(v<=0.01){this.stop();this.currentTrack.volume=this._volume;clearInterval(this._fadeInterval);}
else{this.currentTrack.volume=v;}},_endedCallback:function(){if(this._loop){this.play();}
else{this.next();}}});ig.Sound=ig.Class.extend({path:'',volume:1,currentClip:null,multiChannel:true,_loop:false,init:function(path,multiChannel){this.path=path;this.multiChannel=(multiChannel!==false);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});this.load();},getLooping:function(){return this._loop;},setLooping:function(loop){this._loop=loop;if(this.currentClip){this.currentClip.loop=loop;}},load:function(loadCallback){if(!ig.Sound.enabled){if(loadCallback){loadCallback(this.path,true);}
return;}
if(ig.ready){ig.soundManager.load(this.path,this.multiChannel,loadCallback);}
else{ig.addResource(this);}},play:function(){if(!ig.Sound.enabled){return;}
this.currentClip=ig.soundManager.get(this.path);this.currentClip.loop=this._loop;this.currentClip.volume=ig.soundManager.volume*this.volume;this.currentClip.play();},stop:function(){if(this.currentClip){this.currentClip.pause();this.currentClip.currentTime=0;}}});ig.Sound.WebAudioSource=ig.Class.extend({sources:[],gain:null,buffer:null,_loop:false,init:function(){this.gain=ig.soundManager.audioContext.createGain();this.gain.connect(ig.soundManager.audioContext.destination);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});},play:function(){if(!this.buffer){return;}
var source=ig.soundManager.audioContext.createBufferSource();source.buffer=this.buffer;source.connect(this.gain);source.loop=this._loop;var that=this;this.sources.push(source);source.onended=function(){that.sources.erase(source);};source.start(0);},pause:function(){for(var i=0;i<this.sources.length;i++){try{this.sources[i].stop();}catch(err){}}},getLooping:function(){return this._loop;},setLooping:function(loop){this._loop=loop;for(var i=0;i<this.sources.length;i++){this.sources[i].loop=loop;}},getVolume:function(){return this.gain.gain.value;},setVolume:function(volume){this.gain.gain.value=volume;}});ig.Sound.FORMAT={MP3:{ext:'mp3',mime:'audio/mpeg'},M4A:{ext:'m4a',mime:'audio/mp4; codecs=mp4a.40.2'},OGG:{ext:'ogg',mime:'audio/ogg; codecs=vorbis'},WEBM:{ext:'webm',mime:'audio/webm; codecs=vorbis'},CAF:{ext:'caf',mime:'audio/x-caf'}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=true;ig.normalizeVendorAttribute(window,'AudioContext');ig.Sound.useWebAudio=!!window.AudioContext;});

// lib/impact/loader.js
ig.baked=true;ig.module('impact.loader').requires('impact.utils.image','impact.utils.font','impact.utils.sound').defines(function(){"use strict";ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:false,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(gameClass,resources){this.gameClass=gameClass;this.resources=resources;this._loadCallbackBound=this._loadCallback.bind(this);for(var i=0;i<this.resources.length;i++){this._unloaded.push(this.resources[i].path);}},load:function(){ig.system.clear(ig.settings.get("CLEAR_COLOR"));if(!this.resources.length){this.end();return;}
for(var i=0;i<this.resources.length;i++){this.loadResource(this.resources[i]);}
this._intervalId=setInterval(this.draw.bind(this),16);},loadResource:function(res){res.load(this._loadCallbackBound);},_loadCallback:function(path,status){if(status){this._unloaded.erase(path);}
else{throw('Failed to load resource: '+path);}
this.status=1-(this._unloaded.length/this.resources.length);if(this._unloaded.length==0){setTimeout(this.end.bind(this),250);}},end:function(){if(this.done){return;}
this.done=true;clearInterval(this._intervalId);ig.system.setGame(this.gameClass);},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var s=ig.system.scale;var w=ig.system.width*0.6;var h=ig.system.height*0.1;var x=ig.system.width*0.5-w/2;var y=ig.system.height*0.5-h/2;ig.system.context.fillStyle='#000';ig.system.context.fillRect(0,0,480,320);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s,h*s);ig.system.context.fillStyle='#000';ig.system.context.fillRect(x*s+s,y*s+s,w*s-s-s,h*s-s-s);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s*this._drawStatus,h*s);}});});

// lib/impact/utils/timer.js
ig.baked=true;ig.module('impact.utils.timer').defines(function(){"use strict";ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(seconds){this.base=ig.Timer.time;this.last=ig.Timer.time;this.target=seconds||0;},set:function(seconds){this.target=seconds||0;this.base=ig.Timer.time;this.pausedAt=0;},reset:function(){this.base=ig.Timer.time;this.pausedAt=0;},tick:function(){var delta=ig.Timer.time-this.last;this.last=ig.Timer.time;return(this.pausedAt?0:delta);},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target;},pause:function(){if(!this.pausedAt){this.pausedAt=ig.Timer.time;}},unpause:function(){if(this.pausedAt){this.base+=ig.Timer.time-this.pausedAt;this.pausedAt=0;}}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var current=Date.now();var delta=(current-ig.Timer._last)/1000;ig.Timer.time+=Math.min(delta,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=current;};});

// lib/impact/system.js
ig.baked=true;ig.module('impact.system').requires('impact.utils.timer','impact.utils.image').defines(function(){"use strict";ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:false,delegate:null,clock:null,canvas:null,context:null,init:function(canvasId,fps,width,height,scale){this.fps=fps;this.clock=new ig.Timer();this.canvas=ig.$(canvasId);this.resize(width,height,scale);this.context=this.canvas.getContext('2d');this.getDrawPos=ig.System.drawMode;if(this.scale!=1){ig.System.scaleMode=ig.System.SCALE.CRISP;}
ig.System.scaleMode(this.canvas,this.context);},resize:function(width,height,scale){this.width=width;this.height=height;this.scale=scale||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight;},setGame:function(gameClass){if(this.running){this.newGameClass=gameClass;}
else{this.setGameNow(gameClass);}},setGameNow:function(gameClass){ig.game=new(gameClass)();ig.system.setDelegate(ig.game);},setDelegate:function(object){if(typeof(object.run)=='function'){this.delegate=object;this.startRunLoop();}else{throw('System.setDelegate: No run() function in object');}},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=false;},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this));this.running=true;},clear:function(color){this.context.fillStyle=color;this.context.fillRect(0,0,this.realWidth,this.realHeight);},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();if(this.newGameClass){this.setGameNow(this.newGameClass);this.newGameClass=null;}},getDrawPos:null});ig.System.DRAW={AUTHENTIC:function(p){return Math.round(p)*this.scale;},SMOOTH:function(p){return Math.round(p*this.scale);},SUBPIXEL:function(p){return p*this.scale;}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',false);canvas.style.imageRendering='-moz-crisp-edges';canvas.style.imageRendering='-o-crisp-edges';canvas.style.imageRendering='-webkit-optimize-contrast';canvas.style.imageRendering='crisp-edges';canvas.style.msInterpolationMode='nearest-neighbor';},SMOOTH:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',true);canvas.style.imageRendering='';canvas.style.msInterpolationMode='';}};ig.System.scaleMode=ig.System.SCALE.SMOOTH;});

// lib/impact/native-extension/number.js
ig.baked=true;ig.module('impact.native-extension.number').defines(function(){"use strict";Number.prototype.map=function(istart,istop,ostart,ostop){return ostart+(ostop-ostart)*((this-istart)/(istop-istart));};Number.prototype.limit=function(min,max){return Math.min(max,Math.max(min,this));};Number.prototype.round=function(precision){precision=Math.pow(10,precision||0);return Math.round(this*precision)/precision;};Number.prototype.floor=function(){return Math.floor(this);};Number.prototype.ceil=function(){return Math.ceil(this);};Number.prototype.toInt=function(){return(this|0);};Number.prototype.toRad=function(){return(this/180)*Math.PI;};Number.prototype.toDeg=function(){return(this*180)/Math.PI;};});

// lib/impact/native-extension/array.js
ig.baked=true;ig.module('impact.native-extension.array').defines(function(){"use strict";Object.defineProperty(Array.prototype,'erase',{value:function(item){for(var i=this.length;i--;){if(this[i]===item){this.splice(i,1);}}
return this;}});Object.defineProperty(Array.prototype,'random',{value:function(item){return this[Math.floor(Math.random()*this.length)];}});});

// lib/impact/native-extension/function.js
ig.baked=true;ig.module('impact.native-extension.function').defines(function(){"use strict";Function.prototype.bind=Function.prototype.bind||function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply((this instanceof fNOP&&oThis?this:oThis),aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};});

// lib/impact/utils/check.js
ig.baked=true;ig.module('impact.utils.check').defines(function(){ig.check={function:function(obj,call){return typeof(obj)==="function";},defined:function(obj){return typeof(obj)!="undefined";},array:function(obj){return Array.isArray(obj);;},isOdd:function(number){return number%2;},isInArray:function(arr){if(arr.filter(function(e){return e.Name==='Magenic';}).length>0){}},};});

// lib/impact/utils/log.js
ig.baked=true;ig.module('impact.utils.log').defines(function(){window.log=window.console["log"].bind(window.console,"[Quick-Log]");VALID_LOGGER=["Spawn"];LOGGER_STYLE={"Button":"background: #222; color: #bada55",}
window.logger=function(){var header=arguments[0];if(VALID_LOGGER.includes(header)){header='%c'+header;var style='background: #222; color: #bada55';if(typeof LOGGER_STYLE[header]!=="undefined"){style=LOGGER_STYLE[header];}
var mainArguments=Array.prototype.slice.call(arguments);mainArguments.shift();mainArguments.unshift(style);mainArguments.unshift(header);mainArguments.unshift(header);return console.log.bind.apply(console.log,mainArguments);}
else return function(){};};});

// lib/impact/utils/canvas-draw.js
ig.baked=true;ig.module('impact.utils.canvas-draw').requires('impact.system').defines(function(){ig.canvasDraw={resetData:function(data){this.ctx=ig.system.context;this.systemScale=ig.system.scale;this.alpha=1;this.fillStyle="#000000";this.strokeStyle="#000000";this.stroke=true;this.fill=true;this.roundRadius={tl:0,tr:0,br:0,bl:0};this.fontSize=12;this.fontStyle="Arial";this.fontWeight='normal';this.textAlign="center";this.textBaseline="middle";this.maxWidth=undefined;this.angle=0;this.radius=10;this.imageScale={x:1,y:1};this.drawOffset={x:0,y:0};this.shadowColor="rgba(0,0,0,0.75)";this.shadowOffsetX=0;this.shadowOffsetY=0;},handleData:function(data){this.resetData();for(var propertyName in data){var propertyData=data[propertyName];switch(propertyName){case"ctx":{this.ctx=propertyData;}break;case"systemScale":{this.systemScale=propertyData;}break;case"alpha":{this.alpha=propertyData;}break;case"fillStyle":{this.fillStyle=propertyData;}break;case"strokeStyle":{this.strokeStyle=propertyData;}break;case"stroke":{this.stroke=propertyData;}break;case"fill":{this.fill=propertyData;}break;case"roundRadius":{this.roundRadius={tl:propertyData,tr:propertyData,br:propertyData,bl:propertyData};}break;case"fontWeight":{this.fontWeight=propertyData;}break;case"fontSize":{this.fontSize=propertyData;}break;case"fontStyle":{this.fontStyle=propertyData;}break;case"textAlign":{this.textAlign=propertyData;}break;case"textBaseline":{this.textBaseline=propertyData;}break;case"maxWidth":{this.maxWidth=propertyData;}break;case"angle":{this.angle=propertyData;}break;case"radius":{this.radius=propertyData;}break;case"shadowColor":{this.shadowColor=propertyData;}break;case"shadowOffsetX":{this.shadowOffsetX=propertyData;}break;case"shadowOffsetY":{this.shadowOffsetY=propertyData;}break;}}},circle:function(x,y,radius,data){this.handleData(data);var ctx=this.ctx;ctx.save();ctx.beginPath();ctx.ellipse(x,y,radius,radius,0,0,Math.PI*2);ctx.closePath();if(fill){ctx.fill();}
if(stroke){ctx.stroke();}
ctx.restore();},eclipse:function(x,y,width,height,data){this.handleData(data);var ctx=this.ctx;ctx.save();ctx.fillStyle=this.fillStyle;ctx.strokeStyle=this.strokeStyle;ctx.beginPath();ctx.ellipse(x,y,width,height,this.angle,0,2*Math.PI);ctx.closePath();if(this.fill){ctx.fill();}
if(this.stroke){ctx.stroke();}
ctx.restore();},roundRect:function(x,y,width,height,data){this.handleData(data);var ctx=this.ctx;ctx.save();ctx.fillStyle=this.fillStyle;ctx.strokeStyle=this.strokeStyle;ctx.beginPath();ctx.moveTo(x+this.roundRadius.tl,y);ctx.lineTo(x+width-this.roundRadius.tr,y);ctx.quadraticCurveTo(x+width,y,x+width,y+this.roundRadius.tr);ctx.lineTo(x+width,y+height-this.roundRadius.br);ctx.quadraticCurveTo(x+width,y+height,x+width-this.roundRadius.br,y+height);ctx.lineTo(x+this.roundRadius.bl,y+height);ctx.quadraticCurveTo(x,y+height,x,y+height-this.roundRadius.bl);ctx.lineTo(x,y+this.roundRadius.tl);ctx.quadraticCurveTo(x,y,x+this.roundRadius.tl,y);ctx.closePath();if(this.stroke){ctx.stroke();}
if(this.fill){this.shadow(ctx);ctx.fill();}
ctx.restore();},text:function(text,x,y,data){this.handleData(data);var ctx=this.ctx;ctx.save();ctx.globalAlpha=this.alpha;ctx.textAlign=this.textAlign;ctx.textBaseline=this.textBaseline;ctx.font=this.fontWeight+" "+this.fontSize+"px"+" "+this.fontStyle;ctx.fillStyle=this.fillStyle;ctx.fillText(text,x,y,this.maxWidth);ctx.textAlign="left";var metrics=ctx.measureText(text);ctx.restore();return metrics.width;},textMultiLine:function(text,x,y,data){this.handleData(data);var ctx=this.ctx;ctx.save();ctx.globalAlpha=this.alpha;ctx.textAlign=this.textAlign;ctx.textBaseline=this.textBaseline;ctx.font=this.fontWeight+" "+this.fontSize+"px"+" "+this.fontStyle;ctx.fillStyle=this.fillStyle;var textLines=text.split("<br>");var lineHeight=this.fontSize;for(var i=0;i<textLines.length;i++){line=textLines[i];ctx.fillText(line,x,y+i*lineHeight,this.maxWidth);}
ctx.restore();},shadow:function(ctx){ctx.shadowColor=this.shadowColor;ctx.shadowOffsetX=this.shadowOffsetX;ctx.shadowOffsetY=this.shadowOffsetY;},image:function(image,x,y,data){this.handleData(data);var ctx=this.ctx;ctx.save();var width=image.width;var height=image.height;var originX=x+(image.width/2);var originY=x+(image.height/2);ctx.translate(originX*this.systemScale,originY*this.systemScale);ctx.scale(this.imageScale.x,this.imageScale.y);ctx.translate(-originX*this.systemScale,-originY*this.systemScale);ctx.drawImage(image.data,0,0,width,height,x+this.drawOffset.x,y+this.drawOffset.y,width,height);ctx.restore();},scale:function(context,scaleX,scaleY,x,y,w,h){var scale=ig.system.scale;var originX=x+(w/2);var originY=y+(h/2);context.translate(originX*scale,originY*scale);context.scale(scaleX,scaleY);context.translate(-originX*scale,-originY*scale);}};});

// lib/impact/utils/utils.js
ig.baked=true;ig.module('impact.utils.utils').requires('impact.utils.check','impact.utils.log','impact.utils.canvas-draw').defines(function(){ig.utils={callFunction:function(functionName,object,skipThrow){if(typeof(object[functionName])==="function"){object[functionName]();}else{if(skipThrow)return;throw functionName+" is not a function";}},checkObject:function(newValue,defaultValue){if(typeof newValue==="undefined"){return defaultValue;}else{return newValue;}},};});

// lib/impact/utils/input.js
ig.baked=true;ig.module('impact.utils.input').defines(function(){"use strict";ig.KEY={'MOUSE1':-1,'MOUSE2':-3,'MWHEEL_UP':-4,'MWHEEL_DOWN':-5,'BACKSPACE':8,'TAB':9,'ENTER':13,'PAUSE':19,'CAPS':20,'ESC':27,'SPACE':32,'PAGE_UP':33,'PAGE_DOWN':34,'END':35,'HOME':36,'LEFT_ARROW':37,'UP_ARROW':38,'RIGHT_ARROW':39,'DOWN_ARROW':40,'INSERT':45,'DELETE':46,'_0':48,'_1':49,'_2':50,'_3':51,'_4':52,'_5':53,'_6':54,'_7':55,'_8':56,'_9':57,'A':65,'B':66,'C':67,'D':68,'E':69,'F':70,'G':71,'H':72,'I':73,'J':74,'K':75,'L':76,'M':77,'N':78,'O':79,'P':80,'Q':81,'R':82,'S':83,'T':84,'U':85,'V':86,'W':87,'X':88,'Y':89,'Z':90,'NUMPAD_0':96,'NUMPAD_1':97,'NUMPAD_2':98,'NUMPAD_3':99,'NUMPAD_4':100,'NUMPAD_5':101,'NUMPAD_6':102,'NUMPAD_7':103,'NUMPAD_8':104,'NUMPAD_9':105,'MULTIPLY':106,'ADD':107,'SUBSTRACT':109,'DECIMAL':110,'DIVIDE':111,'F1':112,'F2':113,'F3':114,'F4':115,'F5':116,'F6':117,'F7':118,'F8':119,'F9':120,'F10':121,'F11':122,'F12':123,'SHIFT':16,'CTRL':17,'ALT':18,'PLUS':187,'COMMA':188,'MINUS':189,'PERIOD':190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:false,isUsingKeyboard:false,isUsingAccelerometer:false,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(this.isUsingMouse){return;}
this.isUsingMouse=true;var mouseWheelBound=this.mousewheel.bind(this);ig.system.canvas.addEventListener('mousewheel',mouseWheelBound,false);ig.system.canvas.addEventListener('DOMMouseScroll',mouseWheelBound,false);ig.system.canvas.addEventListener('contextmenu',this.contextmenu.bind(this),false);ig.system.canvas.addEventListener('mousedown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('mouseup',this.keyup.bind(this),false);ig.system.canvas.addEventListener('mousemove',this.mousemove.bind(this),false);if(ig.ua.touchDevice){ig.system.canvas.addEventListener('touchstart',this.keydown.bind(this),false);ig.system.canvas.addEventListener('touchend',this.keyup.bind(this),false);ig.system.canvas.addEventListener('touchcancel',this.keyup.bind(this),false);ig.system.canvas.addEventListener('touchmove',this.mousemove.bind(this),false);ig.system.canvas.addEventListener('MSPointerDown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('MSPointerUp',this.keyup.bind(this),false);ig.system.canvas.addEventListener('MSPointerMove',this.mousemove.bind(this),false);ig.system.canvas.style.msTouchAction='none';}},initKeyboard:function(){if(this.isUsingKeyboard){return;}
this.isUsingKeyboard=true;window.addEventListener('keydown',this.keydown.bind(this),false);window.addEventListener('keyup',this.keyup.bind(this),false);},initAccelerometer:function(){if(this.isUsingAccelerometer){return;}
this.isUsingAccelerometer=true;window.addEventListener('devicemotion',this.devicemotion.bind(this),false);},mousewheel:function(event){var delta=event.wheelDelta?event.wheelDelta:(event.detail*-1);var code=delta>0?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN;var action=this.bindings[code];if(action){this.actions[action]=true;this.presses[action]=true;this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();}},mousemove:function(event){var internalWidth=ig.system.canvas.offsetWidth||ig.system.realWidth;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var ev=event.touches?event.touches[0]:event;this.mouse.x=(ev.clientX-pos.left)/scale;this.mouse.y=(ev.clientY-pos.top)/scale;},contextmenu:function(event){if(this.bindings[ig.KEY.MOUSE2]){event.stopPropagation();event.preventDefault();}},keydown:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keydown'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);if(code<0&&!ig.ua.mobile){window.focus();}
if(event.type=='touchstart'||event.type=='mousedown'){this.mousemove(event);}
var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;}
event.preventDefault();}},keyup:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keyup'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);var action=this.bindings[code];if(action){this.delayedKeyup[action]=true;event.preventDefault();}},devicemotion:function(event){this.accel=event.accelerationIncludingGravity;},bind:function(key,action){if(key<0){this.initMouse();}
else if(key>0){this.initKeyboard();}
this.bindings[key]=action;},bindTouch:function(selector,action){var element=ig.$(selector);var that=this;element.addEventListener('touchstart',function(ev){that.touchStart(ev,action);},false);element.addEventListener('touchend',function(ev){that.touchEnd(ev,action);},false);element.addEventListener('MSPointerDown',function(ev){that.touchStart(ev,action);},false);element.addEventListener('MSPointerUp',function(ev){that.touchEnd(ev,action);},false);},unbind:function(key){var action=this.bindings[key];this.delayedKeyup[action]=true;this.bindings[key]=null;},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={};},state:function(action){return this.actions[action];},pressed:function(action){return this.presses[action];},released:function(action){return!!this.delayedKeyup[action];},clearPressed:function(){for(var action in this.delayedKeyup){this.actions[action]=false;this.locks[action]=false;}
this.delayedKeyup={};this.presses={};},touchStart:function(event,action){this.actions[action]=true;this.presses[action]=true;event.stopPropagation();event.preventDefault();return false;},touchEnd:function(event,action){this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();return false;}});});

// lib/impact/impact.js
ig.baked=true;ig.module('impact.impact').requires('dom.ready','impact.settings','impact.loader','impact.system','impact.native-extension.number','impact.native-extension.array','impact.native-extension.function','impact.utils.utils','impact.utils.input','impact.utils.sound').defines(function(){"use strict";ig.main=function(canvasId,gameClass,fps,width,height,scale,loaderClass){ig.system=new ig.System(canvasId,fps,width,height,scale||1);ig.input=new ig.Input();ig.soundManager=new ig.SoundManager();ig.music=new ig.Music();ig.ready=true;var loader=new(loaderClass||ig.Loader)(gameClass,ig.resources);loader.load();};});

// lib/impact/layer.js
ig.baked=true;ig.module('impact.layer').defines(function(){"use strict";ig.Layer=ig.Class.extend({id:0,settings:{},size:{x:128,y:128},pos:{x:0,y:0},lastPos:{x:0,y:0},layerVisible:true,_killed:false,_layerUpdateFlag:true,_layerDrawFlag:true,init:function(x,y,settings){this.id=++ig.Layer._lastId;this.initSettings(x,y,settings);},initSettings:function(x,y,settings){this.pos.x=this.lastPos.x=x;this.pos.y=this.lastPos.y=y;ig.merge(this,settings);},reset:function(x,y,settings){var proto=this.constructor.prototype;this.settings=proto.settings;this.size.x=proto.size.x;this.size.y=proto.size.y;this.pos.x=this.lastPos.x=proto.pos.x;this.pos.y=this.lastPos.y=proto.pos.y;this.type=proto.type;this.checkAgainst=proto.checkAgainst;this._killed=proto._killed;this.initSettings(x,y,settings);},update:function(){if(!this.layerVisible)return false;this.lastPos.x=this.pos.x;this.lastPos.y=this.pos.y;return true;},draw:function(){if(!this.layerVisible)return false;return true;},kill:function(){ig.game.removeLayer(this);},ready:function(){},erase:function(){},layerShow:function(){this._layerUpdateFlag=true;this._layerDrawFlag=true;},layerHide:function(){this._layerUpdateFlag=false;this._layerDrawFlag=false;}});ig.Layer._lastId=0;});

// lib/impact/game.js
ig.baked=true;ig.module('impact.game').requires('impact.impact','impact.layer').defines(function(){"use strict";ig.Game=ig.Class.extend({layers:[],namedLayers:{},_deferredKill:[],staticInstantiate:function(){this.layers=[];this.namedLayers={};this._deferredKill=[];ig.game=this;return null;},getLayerByName:function(layerName){return this.namedLayers[layerName];},spawnLayer:function(type,x,y,settings){var layerClass=typeof(type)==='string'?ig.global[type]:type;if(!layerClass){throw("Can't spawn layer of type "+type);}
var layer=new(layerClass)(x,y,settings||{});this.layers.push(layer);if(layer.layerName){this.namedLayers[layer.layerName]=layer;}
logger("Spawn","spawnLayer: ("+layer.layerName+")")();return layer;},removeLayer:function(layer){if(layer.layerName){delete this.namedLayers[layer.layerName];}
layer._killed=true;this._deferredKill.push(layer);},run:function(){this.update();this.draw();},update:function(){this.updateLayers();this.removeLayers();this.updatePointer();},updateLayers:function(){for(var i=0;i<this.layers.length;i++){var layer=this.layers[i];if(layer._layerUpdateFlag)layer.update();}},removeLayers:function(){for(var i=0;i<this._deferredKill.length;i++){this._deferredKill[i].erase();this.layers.erase(this._deferredKill[i]);}
this._deferredKill=[];},draw:function(){ig.system.clear(ig.settings.get("CLEAR_COLOR"));for(var i=0;i<this.layers.length;i++){var layer=this.layers[i];if(layer._layerDrawFlag)layer.draw();}},spawnPointer:function(settings){this.pointer=new EntityPointer(-999,-999,settings);},updatePointer:function(){for(var i=0;i<this.layers.length;i++){var layer=this.layers[i];if(!layer._layerUpdateFlag)continue;if(!layer._layerDrawFlag)continue;if(!layer.entities)continue;for(var j=0;j<layer.entities.length;j++){var entity=layer.entities[j];if(!entity)continue;if(entity.touches(this.pointer))this.pointer.check(entity);}}
this.pointer.update();},});});

// lib/configs/game-settings.js
ig.baked=true;ig.module('configs.game-settings').defines(function(){ig.gameSettings={UI_SPACING:15,BLACK_OVERLAY:"rgba(255,255,255,0.5)",TEXT_TITLE_COLOR:"rgba(255,255,255,1)",};});

// lib/configs/game-texts.js
ig.baked=true;ig.module('configs.game-texts').defines(function(){ig.gameTexts={PLAY:"PLAY",SETTINGS:"SETTINGS",HOME:"HOME",SETTINGS:"SETTINGS",};});

// lib/configs/fonts.js
ig.baked=true;ig.module('configs.fonts').defines(function(){ig.fonts={DEFAULT:{NAME:"ARIAL",PIXEL_PER_FONT_SIZE:{x:1,y:1},},DEFAULT:{NAME:"ARIAL",PIXEL_PER_FONT_SIZE:{x:1.5,y:1},}};});

// lib/configs/configs.js
ig.baked=true;ig.module('configs.configs').requires('configs.game-settings','configs.game-texts','configs.fonts').defines(function(){getProperty=function(){var currentObject=this;var settingString="";for(var i=0;i<arguments.length;i++){var arg=arguments[i];currentObject=currentObject[arg];settingString+="."+arg;if(typeof currentObject==="undefined"){throw("Can't get config: "+settingString);}}
return currentObject;};ig.gameTexts.get=getProperty.bind(ig.gameTexts);ig.gameSettings.get=getProperty.bind(ig.gameSettings);ig.fonts.get=getProperty.bind(ig.fonts);});

// lib/plugins/handlers/dom.js
ig.baked=true;ig.module('plugins.handlers.dom').defines(function(){ig.DomHandler=ig.Class.extend({JQUERYAVAILABLE:false,init:function(){this.JQUERYAVAILABLE=this._jqueryAvailable();},_jqueryAvailable:function(){return(typeof jQuery!=="undefined");},addEvent:function(elem,eventName,eventFunction,userCapture){if(this.JQUERYAVAILABLE){elem.on(eventName,eventFunction);}
else{elem.addEventListener(eventName,eventFunction,userCapture);}},create:function(domElement){if(this.JQUERYAVAILABLE){var newDomElement=$("<"+domElement+">");return newDomElement;}
else{var newDomElement=ig.$new(domElement);return newDomElement;}},getElementByClass:function(classname){if(this.JQUERYAVAILABLE){var string="."+classname;return $(string);}
else{return document.getElementsByClassName(classname);}},getElementById:function(id){if(this.JQUERYAVAILABLE){var jqueryObject=$(id);if(jqueryObject.length>0){return $(id);}
else{return null;}}
else{return ig.$(id);}},appendChild:function(appender,appendee){if(this.JQUERYAVAILABLE){appender.append(appendee);}
else{appender.appendChild(appendee);}},appendToBody:function(domElement){if(this.JQUERYAVAILABLE){$("body").append(domElement);}
else{document.body.appendChild(domElement);}},resize:function(elem,w,h){if(this.JQUERYAVAILABLE){elem.width(w.toFixed(2));elem.height(h.toFixed(2));}
else{var tempVisibility=elem.style.visibility;var styleString="width:"+w.toFixed(2)+"px; height:"+h.toFixed(2)+"px;";this.attr(elem,"style",styleString);elem.style.visibility=tempVisibility;}},resizeOffsetLeft:function(elem,w,h,l){if(this.JQUERYAVAILABLE){elem.width(w.toFixed(2));elem.height(h.toFixed(2));elem.css('left',l);}
else{var tempVisibility=elem.style.visibility;var styleString="width:"+w.toFixed(2)+"px; height:"+h.toFixed(2)+"px; left: "+l.toFixed(2)+"px;";this.attr(elem,"style",styleString);elem.style.visibility=tempVisibility;}},resizeOffset:function(elem,w,h,l,t){if(this.JQUERYAVAILABLE){elem.width(w.toFixed(2));elem.height(h.toFixed(2));elem.css('left',l);elem.css('top',t);}else{var tempVisibility=elem.style.visibility;var styleString="width:"+w.toFixed(2)+"px; height:"+h.toFixed(2)+"px; left: "+l.toFixed(2)+"px; top: "+t.toFixed(2)+"px;";this.attr(elem,"style",styleString);elem.style.visibility=tempVisibility;}},css:function(elem,keys){if(this.JQUERYAVAILABLE){elem.css(keys);}else{var styleString="";for(var key in keys){styleString+=key+":"+keys[key]+";";}
this.attr(elem,"style",styleString);}},getOffsets:function(elem){if(this.JQUERYAVAILABLE){var offsets=elem.offset();return{left:offsets.left,top:offsets.top};}else{return{left:elem.offsetLeft,top:elem.offsetTop};}},attr:function(elem,key,value){if(typeof(value)==="undefined"){if(this.JQUERYAVAILABLE){return elem.attr(key);}else{return elem.getAttribute(key);}}else{if(this.JQUERYAVAILABLE){elem.attr(key,value);}else{elem.setAttribute(key,value);}}},show:function(elem){if(!elem||typeof(elem)==="undefined"){return;}
if(this.JQUERYAVAILABLE){elem.show();elem.css("visibility","visible");}else{if(elem){if(elem.style){elem.style.visibility="visible";}else{if(elem[0]){elem[0].style.visibility="visible";}}}}},hide:function(elem){if(!elem||typeof(elem)==="undefined"){return;}
if(this.JQUERYAVAILABLE){elem.hide();elem.css("visibility","hidden");}else{if(elem){if(elem.style){elem.style.visibility="hidden";}else{if(elem[0]){elem[0].style.visibility="hidden";}}}}},getQueryVariable:function(variable){var query=window.location.search.substring(1);var vars=query.split('&');for(var i=0;i<vars.length;i++){var pair=vars[i].match(/([^=]+?)=(.+)/);if(pair&&decodeURIComponent(pair[1])==variable){return decodeURIComponent(pair[2]);}}},});});

// lib/plugins/handlers/size.js
ig.baked=true;ig.module('plugins.handlers.size').defines(function(){ig.SizeHandler=ig.Class.extend({htmlTagToResize:['#canvas'],defaultSize:{x:960,y:720},actualSize:{x:960,y:720},domHandler:null,init:function(domHandler){this.domHandler=domHandler;this.initEventListener();this.resize();},initEventListener:function(){window.addEventListener("orientationchange",this.orientationHandler.bind(this));window.addEventListener("resize",this.orientationHandler.bind(this));},orientationHandler:function(){this.resize();window.scrollTo(0,1);},resize:function(){this.sizeCalcs();this.resizeHtmlTag();},sizeCalcs:function(){this.windowSize={x:window.innerWidth,y:window.innerHeight};this.scaleRatioMultiplier={x:this.windowSize.x/this.defaultSize.x,y:this.windowSize.y/this.defaultSize.y};var multiplier=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y);this.actualSize.x=this.defaultSize.x*multiplier;this.actualSize.y=this.defaultSize.y*multiplier;},resizeHtmlTag:function(){for(var index=0;index<this.htmlTagToResize.length;index++){var elem=this.domHandler.getElementById(this.htmlTagToResize[index]);var overWidth=Math.floor((this.windowSize.x-this.actualSize.x)*0.5);var overHeight=Math.floor((this.windowSize.y-this.actualSize.y)*0.5);if(overWidth<0)overWidth=0;if(overHeight<0)overHeight=0;this.domHandler.resizeOffset(elem,Math.floor(this.actualSize.x),Math.floor(this.actualSize.y),overWidth,overHeight);}},});});

// lib/plugins/handlers/handler.js
ig.baked=true;ig.module('plugins.handlers.handler').requires('plugins.handlers.dom','plugins.handlers.size').defines(function(){ig.initHandlers=function(){ig.domHandler=null;ig.domHandler=new ig.DomHandler();ig.sizeHandler=new ig.SizeHandler(ig.domHandler);};});

// lib/impact/layer-entities.js
ig.baked=true;ig.module('impact.layer-entities').requires('impact.layer').defines(function(){"use strict";ig.LayerEntities=ig.Layer.extend({entities:[],namedEntities:{},_deferredKill:[],_doSortEntities:false,staticInstantiate:function(){return null;},getEntityByName:function(name){return this.namedEntities[name];},getEntitiesByType:function(type){var entityClass=typeof(type)==='string'?ig.global[type]:type;var a=[];for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(ent instanceof entityClass&&!ent._killed){a.push(ent);}}
return a;},spawnEntity:function(type,x,y,settings){var entityClass=typeof(type)==='string'?ig.global[type]:type;if(!entityClass){throw("Can't spawn entity of type "+type);}
var ent=new(entityClass)(x,y,settings||{});ent.parentLayer=this;this.entities.push(ent);if(ent.name){this.namedEntities[ent.name]=ent;}
logger("Spawn","Layer ("+this.layerName+") spawnEntity: ("+ent.id+")")();return ent;},removeEntity:function(ent){if(ent.name){delete this.namedEntities[ent.name];}
ent._killed=true;ent.type=ig.Entity.TYPE.NONE;ent.checkAgainst=ig.Entity.TYPE.NONE;this._deferredKill.push(ent);},update:function(){this.parent();this.updateEntities();this.checkEntities();this.removeKilledEntities();},updateEntities:function(){for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(!ent._killed){ent.update();}}},checkEntities:function(){this.cellSize=ig.settings.get("CELL_SIZE");var hash={};for(var e=0;e<this.entities.length;e++){var entity=this.entities[e];if(entity.type==ig.Entity.TYPE.NONE&&entity.checkAgainst==ig.Entity.TYPE.NONE){continue;}
var checked={},xmin=Math.floor(entity.pos.x/this.cellSize),ymin=Math.floor(entity.pos.y/this.cellSize),xmax=Math.floor((entity.pos.x+entity.size.x)/this.cellSize)+1,ymax=Math.floor((entity.pos.y+entity.size.y)/this.cellSize)+1;for(var x=xmin;x<xmax;x++){for(var y=ymin;y<ymax;y++){if(!hash[x]){hash[x]={};hash[x][y]=[entity];}
else if(!hash[x][y]){hash[x][y]=[entity];}
else{var cell=hash[x][y];for(var c=0;c<cell.length;c++){if(entity.touches(cell[c])&&!checked[cell[c].id]){checked[cell[c].id]=true;ig.Entity.checkPair(entity,cell[c]);}}
cell.push(entity);}}}}},draw:function(){this.parent();for(var i=0;i<this.entities.length;i++){this.entities[i].draw();}},removeKilledEntities:function(){for(var i=0;i<this._deferredKill.length;i++){this._deferredKill[i].erase();this.entities.erase(this._deferredKill[i]);}
this._deferredKill=[];},});});

// lib/plugins/lightning.js
ig.baked=true;ig.module('plugins.lightning').defines(function(){VectorLightning=function(x,y,x1,y1){this.x=x;this.y=y;this.x1=x1;this.y1=y1;};VectorLightning.prototype={dX:function(){return this.x1-this.x;},dY:function(){return this.y1-this.y;},Normalized:function(){var l=this.Length();return new VectorLightning(this.x,this.y,this.x+(this.dX()/l),this.y+(this.dY()/l));},Length:function(){return Math.sqrt(Math.pow(this.dX(),2)+Math.pow(this.dY(),2));},Multiply:function(n){return new VectorLightning(this.x,this.y,this.x+this.dX()*n,this.y+this.dY()*n);},Clone:function(){return new VectorLightning(this.x,this.y,this.x1,this.y1);}};Lightning=function(config){config={Threshold:1,Segments:50,GlowColor:"yellow",GlowWidth:10,GlowBlur:40,GlowAlpha:30,Color:"white",Width:2,Blur:30,BlurColor:"black",Alpha:1};this.config=config;};Lightning.prototype={Cast:function(context,from,to){context.save();if(!from||!to){return;}
var v=new VectorLightning(from.x1,from.y1,to.x1,to.y1);if(this.config.Threshold&&v.Length()>context.canvas.width*this.config.Threshold){return;}
var vLen=v.Length();var refv=from;var lR=(vLen/context.canvas.width)
var segments=Math.floor(this.config.Segments*lR);var l=vLen/segments;for(var i=1;i<=segments;i++){var dv=v.Multiply((1/segments)*i);if(i!=segments){dv.y1+=l*0.5*Math.random()*this.RandomSide();dv.x1+=l*0.5*Math.random()*this.RandomSide();}
var r=new VectorLightning(refv.x1,refv.y1,dv.x1,dv.y1);this.Line(context,r,{Color:this.config.GlowColor,With:this.config.GlowWidth*lR,Blur:this.config.GlowBlur*lR,BlurColor:this.config.GlowColor,Alpha:this.Random(this.config.GlowAlpha,this.config.GlowAlpha*2)/100});this.Line(context,r,{Color:this.config.Color,With:this.config.Width,Blur:this.config.Blur,BlurColor:this.config.BlurColor,Alpha:this.config.Alpha});refv=r;}
this.Circle(context,to,lR);this.Circle(context,from,lR);context.restore();},Circle:function(context,p,lR){context.beginPath();context.arc(p.x1,p.y1,5,0,2*Math.PI,false);context.fillStyle='white';context.shadowBlur=100;context.shadowColor="#2319FF";context.fill();},Line:function(context,v,c){context.beginPath();context.strokeStyle=c.Color;context.lineWidth=c.With;context.moveTo(v.x,v.y);context.lineTo(v.x1,v.y1);context.globalAlpha=c.Alpha;context.shadowBlur=c.Blur;context.shadowColor=c.BlurColor;context.stroke();},Random:function(min,max){return Math.floor(Math.random()*(max-min))+min;},RandomSide:function(){return Math.random()<0.5?-1:1;},}});

// lib/impact/entity.js
ig.baked=true;ig.module('impact.entity.entity').defines(function(){"use strict";ig.Entity=ig.Class.extend({id:0,settings:{},zIndex:0,size:{x:16,y:16},pos:{x:0,y:0},lastPos:{x:0,y:0},type:0,checkAgainst:0,_killed:false,init:function(x,y,settings){this.id=++ig.Entity._lastId;this.initSettings(x,y,settings);},initSettings:function(x,y,settings){this.pos.x=this.lastPos.x=x;this.pos.y=this.lastPos.y=y;ig.merge(this,settings);},reset:function(x,y,settings){var proto=this.constructor.prototype;this.settings=proto.settings;this.zIndex=proto.zIndex;this.size.x=proto.size.x;this.size.y=proto.size.y;this.pos.x=this.lastPos.x=proto.pos.x;this.pos.y=this.lastPos.y=proto.pos.y;this.type=proto.type;this.checkAgainst=proto.checkAgainst;this._killed=proto._killed;this.initSettings(x,y,settings);},update:function(){this.lastPos.x=this.pos.x;this.lastPos.y=this.pos.y;},draw:function(){},kill:function(){ig.game.removeEntity(this);},touches:function(other){return!(this.pos.x>=other.pos.x+other.size.x||this.pos.x+this.size.x<=other.pos.x||this.pos.y>=other.pos.y+other.size.y||this.pos.y+this.size.y<=other.pos.y);},check:function(other){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.TYPE={NONE:0,BUTTON:1,B:2,BOTH:3};ig.Entity.checkPair=function(a,b){if(a.checkAgainst&b.type){a.check(b);}
if(b.checkAgainst&a.type){b.check(a);}};});

// lib/entities/button/base.js
ig.baked=true;ig.module('entities.button.base').requires('impact.entity.entity').defines(function(){EntityButtonBase=ig.Entity.extend({type:ig.Entity.TYPE.BUTTON,size:{x:64,y:64},buttonEnable:true,buttonVisible:true,firstClickedFlag:false,onPointerOver:null,onPointerLeave:null,pointerFirstClick:null,pointerClicking:null,pointerRelease:null,init:function(x,y,settings){this.parent(x,y,settings);},pointerOver:function(){if(this.pointerOverFlag)return;this.pointerOverFlag=true;ig.utils.callFunction("onPointerOver",this,true);},pointerLeave:function(){if(!this.pointerOverFlag)return;this.pointerOverFlag=false;ig.utils.callFunction("onPointerLeave",this,true);if(this.firstClickedFlag){this.firstClickedFlag=false;}},pointerFirstClick:function(){if(this.firstClickedFlag)return;if(!this.canFunction())return;this.firstClickedFlag=true;ig.utils.callFunction("onPointerFirstClick",this,true);},pointerClicking:function(){if(!this.firstClickedFlag)return;ig.utils.callFunction("onPointerClicking",this,true);},pointerRelease:function(){if(!this.firstClickedFlag)return;this.firstClickedFlag=false;ig.utils.callFunction("onPointerRelease",this,true);},canFunction:function(){return this.buttonEnable;},setEnable:function(enable){if(this.buttonEnableOverrideByVisibleFlag){this.buttonEnableOverrideByVisible=enable;}else{this.buttonEnable=enable;}},setVisible:function(visible){if(visible){if(this.buttonEnableOverrideByVisibleFlag){this.buttonEnableOverrideByVisible=true;}
this.buttonEnableOverrideByVisibleFlag=false;this.buttonVisible=true;}else{this.buttonEnableOverrideByVisible=this.buttonEnable;this.buttonEnableOverrideByVisibleFlag=true;this.buttonVisible=false;this.buttonEnable=false}},onPointerOver:function(){logger("Button","onPointerOver")();},onPointerLeave:function(){logger("Button","onPointerLeave")();},onPointerFirstClick:function(){logger("Button","onPointerFirstClick")();},onPointerClicking:function(){logger("Button","onPointerClicking")();},onPointerRelease:function(){logger("Button","onPointerRelease")();},});});

// lib/entities/button/draw.js
ig.baked=true;ig.module('entities.button.draw').requires('entities.button.base').defines(function(){EntityButtonBase.inject({buttonText:"Button",buttonTextColor:"grey",buttonBackgroundColor:"white",getButtonScale:function(){var buttonScale={x:1,y:1};if(!this.canFunction())return;if(this.pointerOverFlag){buttonScale=this.buttonScaleState.over;}
if(this.firstClickedFlag){buttonScale=this.buttonScaleState.click;}
return buttonScale;},draw:function(){this.parent();ig.canvasDraw.roundRect(this.pos.x,this.pos.y,this.size.x,this.size.y,{roundRadius:Math.min(this.size.x,this.size.y)*0.1,fillStyle:this.buttonBackgroundColor,});ig.canvasDraw.text(this.buttonText,this.pos.x+this.size.x*0.5,this.pos.y+this.size.y*0.5,{fillStyle:this.buttonTextColor,maxWidth:this.size.x*0.95});}});});

// lib/entities/button/scale.js
ig.baked=true;ig.module('entities.button.scale').requires('entities.button.base').defines(function(){EntityButtonBase.inject({buttonScale:{x:1,y:1},buttonScaleState:{over:{x:0.95,y:0.95},click:{x:0.9,y:0.9},},getButtonScale:function(){var buttonScale={x:1,y:1};if(!this.canFunction())return;if(this.pointerOverFlag){buttonScale=this.buttonScaleState.over;}
if(this.firstClickedFlag){buttonScale=this.buttonScaleState.click;}
return buttonScale;},draw:function(){this.buttonScale=this.getButtonScale();var context=ig.system.context;context.save();ig.canvasDraw.scale(context,this.buttonScale.x,this.buttonScale.y,this.pos.x,this.pos.y,this.size.x,this.size.y);this.parent();context.restore();}});});

// lib/entities/button.js
ig.baked=true;ig.module('entities.button').requires('entities.button.base','entities.button.draw','entities.button.scale').defines(function(){EntityButton=EntityButtonBase.extend({type:ig.Entity.TYPE.BUTTON,size:{x:128,y:64},init:function(x,y,settings){this.parent(x,y,settings);},onPointerOver:function(){logger("Button","onPointerOver")();},onPointerLeave:function(){logger("Button","onPointerLeave")();},onPointerFirstClick:function(){logger("Button","onPointerFirstClick")();},onPointerClicking:function(){logger("Button","onPointerClicking")();},onPointerRelease:function(){logger("Button","onPointerRelease")();},});});

// lib/entities/pointer.js
ig.baked=true;ig.module('entities.pointer').requires('impact.entity.entity','impact.utils.input').defines(function(){EntityPointer=ig.Entity.extend({checkAgainst:ig.Entity.TYPE.BUTTON,size:{x:1,y:1},bindings:{click:[ig.KEY.MOUSE1]},isFirstPressed:false,isPressed:false,isReleased:false,objectArray:[],objectArrayLastFrame:[],init:function(x,y,settings){this.parent(x,y,settings);ig.input.initMouse();for(var key in this.bindings){this[key]=key;for(var i=0;i<this.bindings[key].length;i++){ig.input.bind(this.bindings[key][i],key);}}},update:function(){this.parent();this.updatePosition();this.handlePointerEventLastFrame();this.handlePointerEvent();this.isFirstPressed=ig.input.pressed('click');this.isReleased=ig.input.released('click');this.isPressed=ig.input.state('click');},updatePosition:function(){this.pos.x=ig.input.mouse.x;this.pos.y=ig.input.mouse.y;},check:function(other){this.objectArray.push(other);},handlePointerEventLastFrame:function(){for(var i=0;i<this.objectArrayLastFrame.length;i++){var object=this.objectArrayLastFrame[i];if(!this.objectArray.includes(object)){ig.utils.callFunction("pointerLeave",object,true);}}
this.objectArrayLastFrame=[];},handlePointerEvent:function(){for(var i=this.objectArray.length-1;i>=0;i--){var object=this.objectArray[i];ig.utils.callFunction("pointerOver",object,true);this.clickObject(object);this.objectArrayLastFrame.push(object);}
this.objectArray=[];},clickObject:function(object){if(this.isFirstPressed){if(typeof(object.pointerFirstClick)=='function'){object.pointerFirstClick();}}
if(this.isPressed&&!this.isReleased){if(typeof(object.pointerClicking)=='function'){object.pointerClicking();}}
if(this.isReleased){if(typeof(object.pointerRelease)=='function'){object.pointerRelease();}}},});});

// lib/plugins/anchor-position.js
ig.baked=true;ig.module('plugins.anchor-position').requires('impact.system','impact.layer','impact.entity.entity').defines(function(){AnchorPosition={systemStartAt:{x:0,y:0},toAnchorPosition:function(anchorOnObject,anchorType){var newPosition={x:this.systemStartAt.x,y:this.systemStartAt.y};var x=this.systemStartAt.x;var y=this.systemStartAt.y;var width=ig.system.width;var height=ig.system.height;if(anchorOnObject){if(typeof anchorOnObject.size!=="undefined"){width=anchorOnObject.size.x;height=anchorOnObject.size.y;}
if(typeof anchorOnObject.pos!=="undefined"){x=anchorOnObject.pos.x;y=anchorOnObject.pos.y;}}
switch(anchorType){case"top-left":case"left-top":{newPosition.x=x;newPosition.y=y;}break;case"top-center":case"center-top":case"top":{newPosition.x=x+width*0.5;newPosition.y=y;}break;case"top-right":case"right-top":{newPosition.x=x+width;newPosition.y=y;}break;case"left-middle":case"middle-left":case"left":{newPosition.x=x;newPosition.y=y+height*0.5;}break;case"center-middle":case"middle-center":case"middle":case"center":{newPosition.x=x+width*0.5;newPosition.y=y+height*0.5;}break;case"right-middle":case"middle-right":case"right":{newPosition.x=x+width;newPosition.y=y+height*0.5;}break;case"bottom-left":case"left-bottom":{newPosition.x=x;newPosition.y=y+height;}break;case"bottom-center":case"center-bottom":case"bottom":{newPosition.x=x+width*0.5;newPosition.y=y+height;}break;case"bottom-right":case"right-bottom":{newPosition.x=x+width;newPosition.y=y+height;}break;default:{}break;}
return newPosition;},toSelfAnchorPosition:function(x,y,selfAnchorType){var newPosition={x:x,y:y};var width=this.size.x;var height=this.size.y;switch(selfAnchorType){case"top-left":case"left-top":{newPosition.x=x;newPosition.y=y;}break;case"top-center":case"center-top":case"top":{newPosition.x=x-width*0.5;newPosition.y=y;}break;case"top-right":case"right-top":{newPosition.x=x-width;newPosition.y=y;}break;case"left-middle":case"middle-left":case"left":{newPosition.x=x;newPosition.y=y-height*0.5;}break;case"center-middle":case"middle-center":case"middle":case"center":{newPosition.x=x-width*0.5;newPosition.y=y-height*0.5;}break;case"right-middle":case"middle-right":case"right":{newPosition.x=x-width;newPosition.y=y-height*0.5;}break;case"bottom-left":case"left-bottom":{newPosition.x=x;newPosition.y=y-height;}break;case"bottom-center":case"center-bottom":case"bottom":{newPosition.x=x-width*0.5;newPosition.y=y-height;}break;case"bottom-right":case"right-bottom":{newPosition.x=x-width;newPosition.y=y-height;}break;default:{}break;}
return newPosition;},anchorType:null,anchorOnObject:null,selfAnchorType:null,updateAnchors:function(){this.pos=this.toAnchorPosition(this.anchorOnObject,this.anchorType);this.pos=this.toSelfAnchorPosition(this.pos.x,this.pos.y,this.selfAnchorType);this.updateAnchorOffsetPercent();this.updateAnchorOffset();},anchorOffset:{x:0,y:0},updateAnchorOffset:function(){this.pos.x=this.pos.x+this.anchorOffset.x;this.pos.y=this.pos.y+this.anchorOffset.y;},anchorOffsetPercent:{x:0,y:0},updateAnchorOffsetPercent:function(){if(this.anchorOnObject){this.pos.x=this.pos.x+this.anchorOffsetPercent.x*this.anchorOnObject.size.x;this.pos.y=this.pos.y+this.anchorOffsetPercent.y*this.anchorOnObject.size.y;}},update:function(){this.updateAnchors();this.parent();},init:function(x,y,settings){this.parent(x,y,settings);this.updateAnchors();},};ig.Layer.inject(AnchorPosition);ig.Entity.inject(AnchorPosition);});

// lib/game/layers/home.js
ig.baked=true;ig.module('game.layers.home').requires('impact.layer-entities','entities.button','entities.pointer').defines(function(){LayerHome=ig.LayerEntities.extend({init:function(x,y,settings){this.parent(x,y,settings);this.buttonPlay=this.spawnEntity(EntityButton,0,0,{anchorOnObject:this,anchorType:"middle",selfAnchorType:"middle",buttonText:ig.gameTexts.get("PLAY"),onPointerRelease:this.onButtonPlayRelease.bind(this)});this.buttonSettings=this.spawnEntity(EntityButton,0,0,{anchorOnObject:this.buttonPlay,anchorOffset:{x:0,y:ig.gameSettings.get("UI_SPACING")},anchorType:"bottom",selfAnchorType:"top",buttonText:ig.gameTexts.get("SETTINGS"),onPointerRelease:this.onButtonSettingsRelease.bind(this)});this.lightning=new Lightning();},update:function(){this.parent();},draw:function(){this.parent();this.lightning.Cast(ig.system.context,new VectorLightning(0,0,ig.system.width*0.25,ig.system.height*0.5),new VectorLightning(0,0,ig.system.width*0.75,ig.system.height*0.5))},onButtonPlayRelease:function(){this.layerHide();},onButtonSettingsRelease:function(){if(ig.check.defined(ig.game.layerSettings))ig.game.layerSettings.layerShow();}});});

// lib/game/layers/settings.js
ig.baked=true;ig.module('game.layers.settings').requires('impact.layer-entities','entities.button','entities.pointer').defines(function(){LayerSettings=ig.LayerEntities.extend({title:"",init:function(x,y,settings){this.title=ig.gameTexts.get("SETTINGS");this.titleTextData={fontSize:Math.round(this.size.x*0.75/ig.fonts.get("DEFAULT","PIXEL_PER_FONT_SIZE","x")),fillStyle:ig.gameSettings.get("TEXT_TITLE_COLOR"),textBaseline:"top"};this.parent(x,y,settings);this.buttonHome=this.spawnEntity(EntityButton,0,0,{anchorOnObject:this,anchorType:"bottom",selfAnchorType:"bottom",buttonText:ig.gameTexts.get("HOME"),anchorOffset:{x:0,y:-ig.gameSettings.get("UI_SPACING")},onPointerRelease:function(){this.layerHide();}.bind(this)});},update:function(){this.parent();},draw:function(){ig.canvasDraw.text(this.title,this.pos.x+this.size.x*0.5,this.pos.y+ig.gameSettings.get("UI_SPACING"),this.titleTextData);ig.canvasDraw.roundRect(this.pos.x,this.pos.y,this.size.x,this.size.y,{fillStyle:ig.gameSettings.get("BLACK_OVERLAY")});this.parent();},});});

// lib/game/main.js
ig.baked=true;ig.module('game.main').requires('impact.game','configs.configs','plugins.handlers.handler','impact.layer-entities','plugins.lightning','entities.button','entities.pointer','plugins.anchor-position','game.layers.home','game.layers.settings').defines(function(){MyGame=ig.Game.extend({init:function(){this.spawnPointer();this.layerHome=this.spawnLayer(LayerHome,0,0,{layerName:"home",anchorType:"middle",selfAnchorType:"middle",size:{x:ig.system.width,y:ig.system.height}});this.layerSettings=this.spawnLayer(LayerSettings,0,0,{layerName:"settings",anchorType:"middle",selfAnchorType:"middle",size:{x:ig.system.height*0.5,y:ig.system.height*0.75}});this.layerSettings.layerHide();},update:function(){this.parent();},draw:function(){this.parent();}});ig.initHandlers();var gameResolution=ig.settings.get("GAME_RESOLUTION");ig.main('#canvas',MyGame,ig.settings.get("GAME_FPS"),gameResolution.WIDTH,gameResolution.HEIGHT,ig.settings.get("GAME_SCALE_FACTOR"));});